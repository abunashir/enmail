#!/usr/bin/env bash
set -euo pipefail
IFS=$'\n\t'
PROJECT_ROOT="$( cd "$( dirname "${BASH_SOURCE[0]}" )/.." >/dev/null && pwd )"

set -vx

########################################
#      Installing required gems...     #
########################################

bundle install

########################################
#       Generating Open PGP keys       #
#             with GnuPG...            #
########################################

${PROJECT_ROOT}/bin/generate_pgp_keys

########################################
#          Validating setup...         #
#     (tests should pass as long as    #
#            they do in CI)            #
########################################

bundle exec rspec
